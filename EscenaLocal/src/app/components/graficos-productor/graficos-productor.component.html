<div class="graficos-wrapper">

  <h2>Gráficos del productor</h2>

  <p *ngIf="loading">Cargando datos...</p>
  <p *ngIf="error">{{ error }}</p>

  <ng-container *ngIf="!loading && !error">

    
    <section class="grafico-bloque" *ngIf="ventasPorDiaChart.length > 0">
      <h3>Recaudación por día</h3>

      <ngx-charts-bar-vertical
        [view]="view"
        [results]="ventasPorDiaChart"
        [xAxis]="true"
        [yAxis]="true"
        [legend]="false"
        [showXAxisLabel]="true"
        [showYAxisLabel]="true"
        [xAxisLabel]="'Fecha'"
        [yAxisLabel]="'ARS'"
        [roundEdges]="true"
        [xAxisTickFormatting]="formatFechaEjeX"
        [yAxisTickFormatting]="formatMoneda">
      </ngx-charts-bar-vertical>
    </section>

    
    <section class="grafico-bloque" *ngIf="entradasPorTipoChart.length > 0">
      <h3>Entradas vendidas por tipo</h3>

      <ngx-charts-pie-chart
        [view]="view"
        [results]="entradasPorTipoChart"
        [legend]="true"
        [explodeSlices]="false"
        [labels]="true"
        [doughnut]="false"
        [tooltipText]="tooltipMoneda">
      </ngx-charts-pie-chart>
    </section>

    
    <section class="grafico-bloque" *ngIf="recaudacionEventosChart.length > 0">
      <h3>Recaudación por evento</h3>

      <ngx-charts-bar-horizontal
        [view]="view"
        [results]="recaudacionEventosChart"
        [xAxis]="true"
        [yAxis]="true"
        [legend]="false"
        [showXAxisLabel]="true"
        [showYAxisLabel]="true"
        [xAxisLabel]="'ARS'"
        [yAxisLabel]="'Evento'"
        [xAxisTickFormatting]="formatMoneda">
      </ngx-charts-bar-horizontal>
    </section>

    
    <div class="acciones">
      <a [routerLink]="['/dashboard/productor']"
         [queryParams]="{ productorId: productorId, from: from, to: to }">
        Volver al dashboard
      </a>
    </div>

  </ng-container>
</div>

